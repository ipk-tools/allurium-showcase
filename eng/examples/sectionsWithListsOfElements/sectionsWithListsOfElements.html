<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Allurium - Building Widget Lists with Nested Widgets</title>
  <!-- Link to Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <style>
    pre {
      background-color: #f8f9fa;
      padding: 1rem;
      border: 1px solid #dee2e6;
      border-radius: 0.25rem;
      overflow-x: auto;
    }
    code {
      font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
      font-size: 0.95em;
    }
    .section-title {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    .nav-links a {
      margin: 0 1rem;
    }
    img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="./../../index.html">Allurium</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <a class="nav-link" href="./../../quick_start.html">Quick Start</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../introduction.html">Intro</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../faq.html">FAQ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../java_doc.html">Javadoc</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/ipk-tools/Allurium" target="_blank" rel="noopener noreferrer">Github</a>
            </li>
          </ul>
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#">Eng</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../../rus/examples/sectionsWithListsOfElements/sectionsWithListsOfElements.html">Rus</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero Section -->
  <section id="home" class="bg-primary text-white text-center py-5">
    <div class="container">
      <h1 class="display-4">Building Widget Lists with Nested Widgets</h1>
      <p class="lead">Example 6</p>
    </div>
  </section>

  <!-- Main Content Section -->
  <section id="examples" class="py-5">
    <div class="container">      
      <p>We have already covered how to build widgets and lists of widgets, as well as how to build locators for elements and widgets inside widgets. However, sometimes you encounter widget lists that contain other lists of elements or smaller widgets. Let's see how to do this using the example of an accordion, but this time, inside each block we add a list of buttons.</p>
      
      <hr/>
      <iframe width="80%" height="350" src="./../../../examples_pages/list_locator_chain.html"></iframe>
      <hr/>
      
      <h3 class="section-title">Selenide Version</h3>
      <p><strong>1. Define the Page Object</strong></p>
      <pre><code class="language-java">@Getter
@Accessors(fluent = true)
public class ListLocatorPage {

    protected ElementsCollection sections = $$("#accordion .card").as("Sections");

    @Step("Select section {sectionTitle}")
    public void clickSection(String sectionTitle) {
        SelenideElement target = null;
        for (SelenideElement section : sections) {
            if (section.find(".card-header button").text().equals(sectionTitle))
                section.find(".card-header button").click();
        }
    }

    @Step("Select {option} in the section {sectionTitle}")
    public void selectOption(String sectionTitle, String option) {
        sections.filter(Condition.text(sectionTitle)).first()
                .findAll(".card-body .btn")
                .filter(Condition.text(option)).first().click();
    }

    @Step("Open context menu {option} in the section {sectionTitle}")
    public void contextClickOption(String sectionTitle, String option) {
        sections.filter(Condition.text(sectionTitle)).first()
                .findAll(".card-body .btn")
                .filter(Condition.text(option)).first().contextClick();
    }
}
</code></pre>
      
      <p><strong>2. Create a test scenario in which different accordion sections are expanded and buttons from the list inside the sections are clicked.</strong></p>
      <pre><code class="language-java">@Test
@DisplayName("Switching accordion sections and selecting options")
public void sectionsWithListsOfElements() {
    Selenide.open(formPageUrl);
    formPage.leftBarLinks().get("List locator chain").click();
    listLocatorPage.sections().get("Section 2").sectionTitle().click();
    listLocatorPage.sections().get("Section 2").listOptions().get("3").click();
    listLocatorPage.sections().get("Section 3").sectionTitle().click();
    listLocatorPage.sections().get("Section 3").listOptions().get("Option 4").click();
    listLocatorPage.sections().get("Section 3").listOptions().get("Option 5").click();
    listLocatorPage.sections().get("Section 1").sectionTitle().click();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 1").click();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 2").click();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 5").contextClick();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 4").click();
}
</code></pre>
      
      <p>Let's view the report:</p>
      <div class="text-center my-3">
        <img src="img/sectionsWithListsOfElements_selenide.jpg" alt="Selenide Report: Sections with Lists of Elements" class="img-fluid">
      </div>
      
      <h3 class="section-title">Allurium Version</h3>
      <p><strong>1. Define the Page Object</strong></p>
      <pre><code class="language-java">@PageObject
@Getter
@Accessors(fluent = true)
public class ListLocatorPage {

    @Name("Sections")
    @ListLocator(css = "#accordion .card")
    protected ListWC&lt;Section&gt; sections = new ListWC<>();

    @Widget
    @Getter
    @Accessors(fluent = true)
    public static class Section extends AbstractWidget {

        @LocatorChain(css = ".card-header button")
        protected Title sectionTitle;

        @Name("Options")
        @ListLocatorChain(css = ".card-body .btn") // Or: @ListLocatorChain(xpath="//div[@class='card-body']/button")
        protected ListWC&lt;Button&gt; listOptions = new ListWC<>();

        public Section(SelenideElement root) {
            super(root);
        }

        @Override
        public String getId() {
            return sectionTitle.text();
        }
    }
}
</code></pre>
      
      <p><strong>2. Define the test scenario</strong></p>
      <pre><code class="language-java">@Test
@DisplayName("Switching accordion sections and selecting options")
public void sectionsWithListsOfElements() {
    UiSteps.openBrowser(formPageUrl);
    formPage.leftBarLinks().get("List locator chain").click();
    listLocatorPage.sections().get("Section 2").sectionTitle().click();
    listLocatorPage.sections().get("Section 2").listOptions().get("3").click();
    listLocatorPage.sections().get("Section 3").sectionTitle().click();
    listLocatorPage.sections().get("Section 3").listOptions().get("Option 4").click();
    listLocatorPage.sections().get("Section 3").listOptions().get("Option 5").click();
    listLocatorPage.sections().get("Section 1").sectionTitle().click();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 1").click();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 2").click();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 5").contextClick();
    listLocatorPage.sections().get("Section 1").listOptions().get("Option 4").click();
}
</code></pre>
      
      <p>Let's view the report:</p>
      <div class="text-center my-3">
        <img src="img/sectionsWithListsOfElements_allurium.jpg" alt="Allurium Report: Sections with Lists of Elements" class="img-fluid">
      </div>
      
      <!-- Navigation Links -->
      <div class="nav-links text-center mt-5">
        <a href="./../accordionFailedTest/accordionFailedTest.html" class="btn btn-outline-secondary">
          &laquo;&nbsp; Example of a Test with an Error
        </a>
        <a href="./../tableExample/tableExample.html" class="btn btn-outline-secondary">
            Describing and Managing a Table using ListWC &nbsp;&raquo;
        </a>
      </div>
      
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-4">
    <div class="container">
      <p>&copy; 2025 Allurium - distributed under the MIT license</p>
    </div>
  </footer>

  <!-- Bootstrap JS (Optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-pzjw8f+ua7Kw1TIq0LkBbf2jOq/dKbX4iXkLppInR8p9lE5f/vp6LFh8S3y9r96f" 
          crossorigin="anonymous"></script>
</body>
</html>
