<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Allurium - Описываем и управляем таблицей с помощью ListWC</title>
  <!-- Link to Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <style>
    pre {
      background-color: #f8f9fa;
      padding: 1rem;
      border: 1px solid #dee2e6;
      border-radius: 0.25rem;
      overflow-x: auto;
    }
    code {
      font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
      font-size: 0.95em;
    }
    .section-title {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    .nav-links a {
      margin: 0 1rem;
    }
    img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="./../../index.html">Allurium</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <a class="nav-link" href="./../../quick_start.html">Быстрый старт</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../introduction.html">Intro</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../faq.html">FAQ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./../../java_doc.html">Javadoc</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/ipk-tools/Allurium" target="_blank" rel="noopener noreferrer">Github</a>
            </li>
          </ul>
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="./../../../eng/examples/tableExample/tableExample.html">Eng</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Rus</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  
  <!-- Hero Section -->
  <section id="home" class="bg-primary text-white text-center py-5">
    <div class="container">
      <h1 class="display-4">Описываем и управляем таблицей с помощью класса "ListWC"</h1>
      <p class="lead">Пример 7</p>
    </div>
  </section>
  
  <!-- Main Content Section -->
  <section id="examples" class="py-5">
    <div class="container">
      
      <p>Рассмотрим следующий пример работы со списком. В этот раз возьмём чуть более сложный виджет в виде записей таблицы-списка.</p>
      
      <hr/>
      <iframe width="100%" height="450" src="./../../../examples_pages/table.html"></iframe>
      <hr/>
      
      <h3 class="section-title">Вариант на обычном Selenide</h3>
      
      <p><strong>1. Описываем Page Object</strong></p>
      <pre><code class="language-java">@Getter
@Accessors(fluent = true)
public class WebTablesPage {

    protected ElementsCollection workersTable = $$(".table tbody tr");

    @Step("Assert that the table contains {surname} with the name {name}")
    public void assertEmployeeWithSurnameHasCertainName(String surname, String name) {
        String targetName = workersTable.filter(Condition.text(surname))
                                       .first().$x("td[1]").text();
        Assertions.assertThat(targetName)
                  .as("Employee name").isEqualTo(name);
    }

    @Step("Assert that table contains {surname} with the email {email}")
    public void assertEmailOfEmployeeWithCertainSurname(String surname, String email) {
        String targetEmail = workersTable.filter(Condition.text(surname))
                                         .first().$x("td[4]").text();
        Assertions.assertThat(targetEmail)
                  .as("Employee email").isEqualTo(email);
    }

    @Step("Hire the employee with with the surname {surname}")
    public void hireBySurname(String surname) {
        workersTable.filter(Condition.text(surname))
                    .first().$x("td[7]/button[1]").click();
    }

    @Step("Fire the employee with with the surname {surname}")
    public void fireBySurname(String surname) {
        workersTable.filter(Condition.text(surname))
                    .first().$x("td[7]/button[2]").click();
    }

    @Step("Assert that the employer {surname} has email with text '{textPattern}'")
    public void assertEmployeeHasEmailWithText(String surname, String textPattern) {
        String targetEmail = workersTable.filter(Condition.text(surname))
                                         .first().$x("td[4]").text();
        Assertions.assertThat(targetEmail)
                  .as(surname + " email").contains(textPattern);
    }

    @Step("Assert that employee {surname} is from {department} department")
    public void assertDepartmentOfEmployee(String surname, String department) {
        String targetDepartment = workersTable.filter(Condition.text(surname))
                                              .first().$x("td[6]").text();
        Assertions.assertThat(targetDepartment)
                  .as(surname + " department").contains(department);
    }
}
</code></pre>
      
      <p><strong>2. Создаём сценарий</strong></p>
      <pre><code class="language-java">@Test
@DisplayName("Using ListWC to handle a table")
public void tableExample() {
    Selenide.open(tablePageUrl);
    webTablesPage.assertEmployeeWithSurnameHasCertainName("Vega", "Cierra");
    webTablesPage.assertEmailOfEmployeeWithCertainSurname("Cantrell", "alden@example.com");
    webTablesPage.hireBySurname("Gentry");
    webTablesPage.assertEmployeeHasEmailWithText("Hogg", "hogg@");
    webTablesPage.hireBySurname("Hogg");
    webTablesPage.fireBySurname("Watkins");
    webTablesPage.assertDepartmentOfEmployee("Howard", "Development");
    webTablesPage.hireBySurname("Spencer");
}
</code></pre>
      
      <p>Смотрим отчёт:</p>
      <div class="text-center my-3">
        <img src="img/tableExample_selenide.jpg" alt="Отчёт Selenide: Таблица" class="img-fluid">
      </div>
      
      <h3 class="section-title">Вариант на Allurium</h3>
      
      <p><strong>1. Описываем Page Object</strong></p>
      <pre><code class="language-java">@PageObject
@Getter
@Accessors(fluent = true)
public class IframePage extends Page {

    @Name("Name")
    protected TextField fieldName = $textField("#name");

    @Name("Email")
    protected TextField fieldEmail = $textField("#email");

    @Name("Password")
    protected TextField fieldPassword = $textField("#password");

    @Name("Submit")
    protected Button btnSubmit = $button("#submit-main");

    @Name("Login form of iframe")
    protected IframeLoginForm iframeLoginForm = new IframeLoginForm("#iframe_root");

    @Widget
    @Getter
    @Accessors(fluent = true)
    public static class IframeLoginForm extends Iframe {
        public IframeLoginForm(String selenideLocator) {
            super(selenideLocator);
        }

        @Name("Name")
        protected TextField fieldName = $textField("#name_iframe");

        @Name("Email")
        protected TextField fieldEmail = $textField("#email_iframe");

        @Name("Password")
        protected TextField fieldPassword = $textField("#password_iframe");

        @Name("Submit")
        protected Button btnSubmit = $button("#submit-iframe");
    }
}
</code></pre>
      
      <p><strong>2. Описываем сценарий</strong></p>
      <pre><code class="language-java">@Test
@DisplayName("Using ListWC to handle a table")
public void tableExample() {
    UiSteps.openBrowser(tablePageUrl);
    webTablesPage.listEmployee().assertSize(9);
    webTablesPage.listEmployee().get("Vega").firstName().assertText("Cierra");
    webTablesPage.listEmployee().get("Cantrell").email().assertText("alden@example.com");
    webTablesPage.listEmployee().get("Gentry").btnActionHire().click();
    webTablesPage.listEmployee().get("Hogg").assertHasText("hogg@");
    webTablesPage.listEmployee().get("Hogg").btnActionHire().click();
    webTablesPage.listEmployee().get("Watkins").btnActionFire().click();
    webTablesPage.listEmployee().get("Howard").department().assertText("Development");
    webTablesPage.listEmployee().get("Spencer").btnActionHire().click();
}
</code></pre>
      
      <p>Смотрим отчёт:</p>
      <div class="text-center my-3">
        <img src="img/tableExample_allurium.jpg" alt="Отчёт Allurium: Таблица" class="img-fluid">
      </div>
      
      <p>Здесь разница в количестве кода и удобстве видна пропорционально числу конкретных шагов. По сути всё, что нам понадобилось сделать, – это просто описать элементы интерфейса и обращаться к ним. Всё остальное, включая поиск и логирование шагов, делает фреймворк.</p>
      
      <!-- Navigation Links -->
      <div class="nav-links text-center mt-5">
        <a href="./../sectionsWithListsOfElements/sectionsWithListsOfElements.html" class="btn btn-outline-secondary">
          &laquo;&nbsp; Строим списки виджетов, со списками внутри виджетов
        </a>
        <a href="./../dynamicTable/dynamicTable.html" class="btn btn-outline-secondary">
            Управление динамической таблицей &nbsp;&raquo;
        </a>
      </div>
      
    </div>
  </section>
  
  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-4">
    <div class="container">
      <p>&copy; 2025 Allurium - распространяется под лицензией MIT</p>
    </div>
  </footer>
  
  <!-- Bootstrap JS (Optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
          integrity="sha384-pzjw8f+ua7Kw1TIq0LkBbf2jOq/dKbX4iXkLppInR8p9lE5f/vp6LFh8S3y9r96f" 
          crossorigin="anonymous"></script>
</body>
</html>
